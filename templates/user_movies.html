<!-- templates/index.html -->
{% extends "layout.html" %}

{% block title %}
<!-- the title in layout.html -->
user movies
{% endblock %}

{% block content %}
<!-- the content in the layout -->
<div class="container">
  <section>
    <div class="row">
      <div class="col">
        <h1>USER</h1>
        <h2>favorite movies</h2>
      </div>
      <div class="col order-sm-1 hello_user"><p>
        <b>Hello {{ user.name }} !!!</b></p>
        <p>Click here to</p>
        <form action="/users/{{ user.id }}/add_movie" method="POST">
          <button type="submit" class="btn btn-success" name="user_id" value="{{ user.id }}">add a movie</button>
        </form>
      </div>
    </div>
  </section>

  <section>
    <div class="">
      {% for movie in movies %}
        <div class="row movie_in_list">
          <div class="col flex_column_center_center" style="padding: 0px;">
            <img src="{{ movie.poster }}" alt="The cover is not available" style="max-height: 80%;">
          </div>
          <div class="col flex_column_center_center" style="text-align: center;">
            <h1>{{ movie.title }}</h1>
            <span>{{ movie.year }}</span>
            <table class="table">
              <thead>
                <tr>
                  <th>genre</th>
                  <th>director</th>
                  <th>rating</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>{{ movie.genre }}</td>
                  <td>{{ movie.director.name }}</td>
                  <td>{{ movie.rating }}
              </tbody>
            </table>
            <div style="display: flex; justify-content: center; align-items: center; width: 100%;">
              <form action="" method="POST">
               <button type="button" class="btn btn-warning" href="/users/<user_id>/update_movie/<movie_id>" name="update" value="update" >update</button>
              </form>
              <form action="" method="POST" style="margin: 0px 10px;">
               <button type="button" class="btn btn-danger" href="/users/<user_id>/update_movie/<movie_id>" name="delete" value="delete">delete</button>
              </form>
              <form action="" method="POST">
              <button type="button" class="btn btn-info" href="/users/<user_id>/info_movie/<movie_id>" name="info" value="info">&nbsp;&nbsp;&nbsp;Info&nbsp;&nbsp;&nbsp;</button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>
</div>

{% endblock %}